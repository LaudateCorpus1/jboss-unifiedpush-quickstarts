<!DOCTYPE html><html><head><title>README</title><link href="http://static.jboss.org/ffe/0/www/vendor/redhat/documentation.css" rel="stylesheet"></link><link href="http://static.jboss.org/ffe/0/www/vendor/redhat/pygments.css" rel="stylesheet"></link></head><body>
<h1><a id="contactsmobilewebapp-contacts-crud-mobile-example-using-html5-and-jquery" class="anchor" href="#contactsmobilewebapp-contacts-crud-mobile-example-using-html5-and-jquery"><span class="anchor-icon"></span></a>contacts-mobile-webapp: Contacts CRUD Mobile Example Using HTML5 and jQuery</h1>

<p>Author: Joshua Wilson<br/>
Level: Beginner<br/>
Technologies: jQuery Mobile, jQuery, JavaScript, HTML5, REST<br/>
Summary: The <code>contacts-mobile-webapp</code>  quickstart demonstrates how to develop a contacts CRUD Mobile application using HTML5 and jQuery Mobile.<br/>
Target Product: JBoss Unified Push<br/>
Versions: 1.0<br/>
Source: <a href="https://github.com/jboss-developer/jboss-mobile-quickstarts/">https://github.com/jboss-developer/jboss-mobile-quickstarts/</a>  </p>

<h2><a id="what-is-it" class="anchor" href="#what-is-it"><span class="anchor-icon"></span></a>What is it?</h2>

<p>The <code>contacts-mobile-webapp</code>  quickstart is a deployable Maven 3 project to help you get started in developing HTML5 based mobile web applications on JBoss EAP. This project is set up to allow you to create a basic Java EE 6 application using HTML5 and jQuery Mobile.</p>

<p>This application is built using HTML5. This uses a pure HTML client that interacts with the application server via restful end-points (JAX-RS). This application also uses some of the latest HTML5 features. And since testing is just as important with client side as it is with server side, this application uses QUnit to show you how to unit test your JavaScript.</p>

<p>This application focuses on <code>CRUD</code> in a strictly mobile app using only <code>jQuery Mobile</code> (no other frameworks). The user will have the ability to:</p>

<ul>
<li><code>Create</code> a new contact.</li>
<li><code>Read</code> a list of contacts.</li>
<li><code>Update</code> an existing contact.</li>
<li><code>Delete</code> a contact.</li>
</ul>

<p><code>Validation</code> is an important part of an application.  Typically in an HTML5 app you can let the built-in HTML5 form validation do the work for you.<br/>
However in a mobile app it doesn&rsquo;t work, the mobile browsers just don&rsquo;t support it at this time.  </p>

<p>In order to validate the forms, we added a plugin <code>jquery.validate</code>. We provide both client-side and server-side validation through this plugin. Over AJAX, if there is an error, the error is returned and displayed in the form. You can see an example of this in the <code>Edit</code> form if you enter an email that is already in use. There will be three errors on the screen; one in the <code>email</code> field and two at the top of the screen. The application will attempt to insert the error message into a field if that field exists. If the field does not exist then it displays it at the top.<br/>
In addition, there are <a href="#run-the-qunit-tests">qunit tests</a> for every form of validation.</p>

<h2><a id="how-do-i-use-it" class="anchor" href="#how-do-i-use-it"><span class="anchor-icon"></span></a>How do I use it?</h2>

<h3><a id="0-system-requirements" class="anchor" href="#0-system-requirements"><span class="anchor-icon"></span></a>0. System Requirements</h3>

<ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 6</a></li>
<li><a href="http://maven.apache.org">Maven 3.0</a> or later</li>
<li>Red Hat JBoss Enterprise Application Platform (EAP) 6.3.0.GA</li>
<li>An HTML5 compatible browser such as Chrome, Safari 5+, Firefox 5+, or IE 9+ are required. </li>
</ul>

<p><strong>Note:</strong> some behaviors will vary slightly (e.g. validations) based on browser support, especially IE 9.</p>

<p>Mobile web support is limited to Android and iOS devices.</p>

<h3><a id="1-prepare-maven-libraries" class="anchor" href="#1-prepare-maven-libraries"><span class="anchor-icon"></span></a>1. Prepare Maven Libraries</h3>

<p>This quickstart is designed to be built with Maven. It requires the JBoss Unified Push and JBoss EAP 6.3.0 Maven repositories.</p>

<p>You must have the JBoss Unified Push Maven repository available and Maven configured to use it. For more information, see the <a href="https://github.com/jboss-developer/jboss-developer-shared-resources/blob/master/guides/CONFIGURE_MAVEN.md#configure-maven-to-build-and-deploy-the-quickstarts">Configure Maven</a> or the README distributed with the <a href="https://www.jboss.org/download-manager/file/jboss-unified-push-1.0.0.Beta1-maven-repository.zip">JBoss Unified Push Maven repository</a>.</p>

<h3><a id="2-start-the-jboss-eap-server" class="anchor" href="#2-start-the-jboss-eap-server"><span class="anchor-icon"></span></a>2. Start the JBoss EAP Server</h3>

<ol>
<li>Open a command line and navigate to the root of the JBoss EAP directory.</li>
<li><p>The following shows the command line to start the server with the default profile:</p>
<div class="highlight"><pre><span class="vg">For</span><span class="w"> </span><span class="nl">Linux:</span><span class="w">   </span><span class="vg">EAP_HOME</span><span class="o">/</span><span class="vg">bin</span><span class="o">/</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">sh</span>
<span class="vg">For</span><span class="w"> </span><span class="nl">Windows:</span><span class="w"> </span><span class="vg">EAP_HOME</span><span class="o">\</span><span class="vg">bin</span><span class="o">\</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">bat</span>
</pre></div></li>
</ol>

<p><strong>Note:</strong> Adding &ldquo;-b 0.0.0.0&rdquo; to the above commands will allow external clients (phones, tablets, desktops, etc&hellip;) to connect through your local network.</p>

<p>For example</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="nl">Linux:</span><span class="w">   </span><span class="vg">EAP_HOME</span><span class="o">/</span><span class="vg">bin</span><span class="o">/</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">sh</span><span class="w"> </span><span class="o">-</span><span class="vg">b</span><span class="w"> </span><span class="mf">0.0.0.0</span>
<span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="nl">Windows:</span><span class="w"> </span><span class="vg">EAP_HOME</span><span class="o">\</span><span class="vg">bin</span><span class="o">\</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">bat</span><span class="w"> </span><span class="o">-</span><span class="vg">b</span><span class="w"> </span><span class="mf">0.0.0.0</span>
</pre></div>
<p>If you are running multiple servers on the same machine you can use <code>jboss.socket.binding.port-offset</code> to avoid port conflicts:</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="nl">Linux:</span><span class="w">   </span><span class="vg">EAP_HOME</span><span class="o">/</span><span class="vg">bin</span><span class="o">/</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">sh</span><span class="w"> </span><span class="o">-</span><span class="vg">b</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="o">-</span><span class="vg">Djboss</span><span class="o">.</span><span class="vg">socket</span><span class="o">.</span><span class="vg">binding</span><span class="o">.</span><span class="vg">port</span><span class="o">-</span><span class="vg">offset</span><span class="o">=</span><span class="il">1000</span>
<span class="w">    </span><span class="vg">For</span><span class="w"> </span><span class="nl">Windows:</span><span class="w"> </span><span class="vg">EAP_HOME</span><span class="o">\</span><span class="vg">bin</span><span class="o">\</span><span class="vg">standalone</span><span class="o">.</span><span class="vg">bat</span><span class="w"> </span><span class="o">-</span><span class="vg">b</span><span class="w"> </span><span class="mf">0.0.0.0</span><span class="w"> </span><span class="o">-</span><span class="vg">Djboss</span><span class="o">.</span><span class="vg">socket</span><span class="o">.</span><span class="vg">binding</span><span class="o">.</span><span class="vg">port</span><span class="o">-</span><span class="vg">offset</span><span class="o">=</span><span class="il">1000</span>
</pre></div>
<h3><a id="3-configure-the-rest-api-server" class="anchor" href="#3-configure-the-rest-api-server"><span class="anchor-icon"></span></a>3. Configure the REST API server</h3>

<p>This web application can be configured to use the <code>push-contacts-mobile-picketlink-secured</code> or the <code>contacts-mobile-proxy</code> as the backend REST API.
To switch between backends update <code>CONTACTS.app.serverUrl</code> in <code>src/main/webapp/js/app.js</code>:</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">CONTACTS</span><span class="o">.</span><span class="vg">app</span><span class="o">.</span><span class="vg">serverUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;http://localhost:8080/jboss-push-contacts-mobile-picketlink-secured&quot;</span><span class="p">;</span>
</pre></div>
<p>or</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">CONTACTS</span><span class="o">.</span><span class="vg">app</span><span class="o">.</span><span class="vg">serverUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;http://localhost:8080/jboss-contacts-mobile-proxy&quot;</span><span class="p">;</span>
</pre></div>
<p><strong>Note:</strong> the port numbers above might be different for your current setup.</p>

<p>Please refer to the documentation for <a href="../../server/push-contacts-mobile-picketlink-secured">push-contacts-mobile-picketlink-secured</a> and <a href="../../server/contacts-mobile-proxy">contacts-mobile-proxy</a> for details about deploying these quickstarts.</p>

<h3><a id="4-build-and-deploy-the-quickstart" class="anchor" href="#4-build-and-deploy-the-quickstart"><span class="anchor-icon"></span></a>4. Build and Deploy the Quickstart</h3>

<ol>
<li>Make sure you have started the JBoss EAP server as described above.</li>
<li>Open a command line and navigate to the root directory of this quickstart.</li>
<li><p>Type this command to build and deploy the archive:</p>
<div class="highlight"><pre><span class="vg">mvn</span><span class="w"> </span><span class="vg">clean</span><span class="w"> </span><span class="vg">package</span><span class="w"> </span><span class="vg">jboss</span><span class="o">-</span><span class="nl">as:</span><span class="vg">deploy</span>
</pre></div></li>
<li><p>This deploys <code>target/jboss-contacts-mobile-webapp.war</code> to the running instance of the server.</p></li>
</ol>

<h3><a id="5-test-the-application" class="anchor" href="#5-test-the-application"><span class="anchor-icon"></span></a>5. Test the Application</h3>

<p>Access the running client application in a browser at the following URL: <a href="http://localhost:8080/jboss-contacts-mobile-webapp/">http://localhost:8080/jboss-contacts-mobile-webapp/</a>. You can use one of the default user credentials (&lsquo;<em>maria:maria</em>&rsquo;,&lsquo;<em>dan:dan</em>&rsquo;, or &lsquo;<em>john:john</em>&rsquo;).
The app is made up of the following pages:</p>

<p><strong>Main page</strong></p>

<ul>
<li>Displays a list of contacts</li>
<li>Search bar for the list</li>
<li>Details button changes to the Detailed list</li>
<li>Clicking on a contact brings up an Edit form</li>
<li>Menu button (in upper left) opens menu</li>
</ul>

<p><strong>Menu pullout</strong></p>

<ul>
<li>Add a new Contact</li>
<li>List/Detail view switcher, depending on what is currently displayed</li>
<li>About information</li>
<li>Theming - apply various themes (only on the List view)</li>
</ul>

<p><strong>Details page</strong></p>

<ul>
<li>Same as Main page except all information is displayed with each contact</li>
</ul>

<p><strong>Add form</strong></p>

<ul>
<li>First name, Last name, Phone, Email, and BirthDate fields</li>
<li>Save = submit the form</li>
<li>Clear = reset the form but stay on the form</li>
<li>Cancel = reset the form and go the Main page</li>
</ul>

<p><strong>Edit form</strong></p>

<ul>
<li>Same as Add form</li>
<li>Delete button will delete the contact currently viewed and return you to the Main page</li>
</ul>

<h3><a id="6-undeploy-the-quickstart" class="anchor" href="#6-undeploy-the-quickstart"><span class="anchor-icon"></span></a>6. Undeploy the Quickstart</h3>

<ol>
<li>Make sure you have started the JBoss EAP server as described above.</li>
<li>Open a command line and navigate to the root directory of this quickstart.</li>
<li><p>When you are finished testing, type this command to undeploy the archive:</p>
<div class="highlight"><pre><span class="vg">mvn</span><span class="w"> </span><span class="vg">jboss</span><span class="o">-</span><span class="nl">as:</span><span class="vg">undeploy</span>
</pre></div></li>
</ol>

<h2><a id="" class="anchor" href="#"><span class="anchor-icon"></span></a>FAQ</h2>

<p>Why can&rsquo;t I enter a date in the birthdate field?</p>

<ul>
<li>Chrome has a <a href="https://code.google.com/p/chromium/issues/detail?id=232296">bug</a> in it

<ul>
<li>Use the arrow keys to change the date: up arrow key, tab to day, up arrow key, tab to year, up arrow key</li>
<li>Use the date picker: a large black down arrow between the up/down arrows and the big X on the right side.</li>
</ul></li>
<li>Firefox, IE, and Safari require strict formatting of YYYY-DD-MM, <em>Note:</em> It must be a dash and not a slash</li>
</ul>

<h2><a id="minification" class="anchor" href="#minification"><span class="anchor-icon"></span></a>Minification</h2>

<p>By default, the project uses the <a href="http://code.google.com/p/wro4j/">wro4j</a> plugin, which provides the ability to concatenate, validate and minify JavaScript and CSS files. These minified files, as well as their unmodified versions are deployed with the project.  </p>

<p>With just a few quick changes to the project, you can link to the minified versions of your JavaScript and CSS files.  </p>

<p>First, in the <code>&lt;project-root&gt;/src/main/webapp/index.html</code> file, search for references to minification and comment or uncomment the appropriate lines.</p>

<p>Finally, wro4j runs in the compile phase so any standard build command like package, install, etc. will trigger it.<br/>
The plugin is in a profile with an id of <code>minify</code> so you will want to specify that profile in your maven build. For example:</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">mvn</span><span class="w"> </span><span class="vg">clean</span><span class="w"> </span><span class="vg">package</span><span class="w"> </span><span class="vg">jboss</span><span class="o">-</span><span class="nl">as:</span><span class="vg">deploy</span><span class="w"> </span><span class="o">-</span><span class="vg">Pminify</span><span class="p">,</span><span class="vg">default</span>
</pre></div>
<h2><a id="run-the-qunit-tests" class="anchor" href="#run-the-qunit-tests"><span class="anchor-icon"></span></a>Run the QUnit tests</h2>

<p>QUnit is a JavaScript unit testing framework used and built by jQuery. Because JavaScript code is the core of this HTML5 application, this quickstart provides a set of QUnit tests that automate testing of this code in various browsers. Executing QUnit test cases are quite easy.  </p>

<p>Simply load the following HTML in the browser you wish to test.</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">QUICKSTART_HOME</span><span class="o">/</span><span class="vg">push</span><span class="o">-</span><span class="vg">contacts</span><span class="o">-</span><span class="vg">mobile</span><span class="o">/</span><span class="vg">client</span><span class="o">/</span><span class="vg">contacts</span><span class="o">-</span><span class="vg">mobile</span><span class="o">-</span><span class="vg">webapp</span><span class="o">/</span><span class="vg">src</span><span class="o">/</span><span class="vg">test</span><span class="o">/</span><span class="vg">qunit</span><span class="o">/</span><span class="vg">index</span><span class="o">.</span><span class="vg">html</span>
</pre></div>
<p><strong>Note:</strong> If you use <code>Chrome</code>, some date tests fail. These are false failures and are known issues with Chrome. FireFox, Safari, and IE run the tests correctly.</p>

<p>You can also display the tests using the Eclipse built-in browser.</p>

<p>For more information on QUnit tests see <a href="http://docs.jquery.com/QUnit">http://docs.jquery.com/QUnit</a></p>

<h2><a id="use-the-project-with-an-ide" class="anchor" href="#use-the-project-with-an-ide"><span class="anchor-icon"></span></a>Use the Project with an IDE</h2>

<p>You can import this project into an IDE (JBoss Developer Studio, NetBeans or IntelliJ IDEA). If you are using JBoss Developer Studio you must import the project as a Maven project. If you are using NetBeans 6.8 or IntelliJ IDEA 9, then you can open the project as an existing project as both of these IDEs recognize Maven projects natively.</p>

<p>You can also start the server and deploy the quickstarts from JBoss Developer Studio. For more information , see the <a href="http://www.jboss.org/products/devstudio/get-started/" title="Get Started with JBoss Developer Studio">Get Started with JBoss Developer Studio</a>.</p>

<p>If you want to debug the source code of any library in the project, run the following command to pull the source into your local repository. The IDE should then detect it.</p>
<div class="highlight"><pre><span class="vg">mvn</span><span class="w"> </span><span class="nl">dependency:</span><span class="vg">sources</span>
</pre></div></body></html>
