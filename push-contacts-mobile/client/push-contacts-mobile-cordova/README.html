<!DOCTYPE html><html><head><title>README</title><link href="http://static.jboss.org/ffe/0/www/vendor/redhat/documentation.css" rel="stylesheet"></link><link href="http://static.jboss.org/ffe/0/www/vendor/redhat/pygments.css" rel="stylesheet"></link></head><body>
<h1><a id="pushcontactsmobilecordova-push-contacts-mobile-cordova" class="anchor" href="#pushcontactsmobilecordova-push-contacts-mobile-cordova"><span class="anchor-icon"></span></a>push-contacts-mobile-cordova: Push Contacts Mobile Cordova</h1>

<p>Author: Erik Jan de Wit (edewit)<br/>
Level: Intermediate<br/>
Technologies: JavaScript Cordova<br/>
Summary: A contacts CRUD mobile application with push notification integration.<br/>
Target Product: JBoss Unified Push<br/>
Versions: 1.0<br/>
Source: <a href="https://github.com/jboss-developer/jboss-mobile-quickstarts/">https://github.com/jboss-developer/jboss-mobile-quickstarts/</a>  </p>

<h2><a id="what-is-it" class="anchor" href="#what-is-it"><span class="anchor-icon"></span></a>What is it?</h2>

<p>This quickstart demonstrates how to develop more advanced Cordova push applications, centered around a CRUD contacts application.</p>

<p>This client-side Cordova project must be used in conjunction with the <code>push-contacts-mobile/server/push-contacts-mobile-picketlink-secured</code> application, which provide the accompanying server-side functionality.  </p>

<p>When the client application is deployed to an Android or iOS device, the push functionality enables the device to register with the running JBoss Unified Push Server OpenShift instance and receive push notifications. The server-side application provides login authentication for the client application and sends push notification requests to the Unified Push Server OpenShift instance in response to new contacts being created. Push notifications received by the Android or iOS device contain details of newly added contacts.</p>

<h2><a id="how-do-i-run-it" class="anchor" href="#how-do-i-run-it"><span class="anchor-icon"></span></a>How do I run it?</h2>

<h3><a id="0-system-requirements" class="anchor" href="#0-system-requirements"><span class="anchor-icon"></span></a>0. System requirements</h3>

<p>The Cordova command line tooling is based on node.js so first you&rsquo;ll need to <a href="http://nodejs.org/download/">install node</a>, then you can install Cordova by executing:</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">npm</span><span class="w"> </span><span class="vg">install</span><span class="w"> </span><span class="o">-</span><span class="vg">g</span><span class="w"> </span><span class="vg">cordova</span>
</pre></div>
<p>To deploy on iOS you need to install the ios-deploy package as well</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">npm</span><span class="w"> </span><span class="vg">install</span><span class="w"> </span><span class="o">-</span><span class="vg">g</span><span class="w"> </span><span class="vg">ios</span><span class="o">-</span><span class="vg">deploy</span>
</pre></div>
<h4><a id="" class="anchor" href="#"><span class="anchor-icon"></span></a>iOS</h4>

<p>For iOS you&rsquo;ll need a valid provisioning profile as you will need to test on an actual device (push notification is not available when using a simulator).
Replace the bundleId with your bundleId (the one associated with your certificate), by editing the config.xml at the root of this project, change the id attribute of the <code>widget</code> node. After that run a <code>cordova platform rm ios</code> followed by <code>cordova platform add ios</code> to change the Xcode project template.</p>

<p>If you want to change your bundleId later on, you will still have to run a <code>cordova platform rm ios</code> followed by <code>cordova platform add ios</code> to change the Xcode project template.</p>

<h4><a id="android" class="anchor" href="#android"><span class="anchor-icon"></span></a>Android</h4>

<p>To deploy and run Cordova applications on Android the Apache Ant tool needs to be <a href="http://ant.apache.org/manual/install.html">installed</a>.</p>

<h3><a id="1-register-application-with-push-services" class="anchor" href="#1-register-application-with-push-services"><span class="anchor-icon"></span></a>1. Register Application with Push Services</h3>

<p>For the configuration and registration of Android or iOS Applications with PushServices, please refer to the specific guides inside <em>push-contacts-mobile-android</em> and <em>push-contacts-mobile-ios</em> quickstarts.</p>

<h3><a id="2-customize-and-build-application" class="anchor" href="#2-customize-and-build-application"><span class="anchor-icon"></span></a>2. Customize and Build Application</h3>

<p>There are 2 examples for Cordova; one is built using <a href="jqm">jquery mobile</a> and one with <a href="angular">angular</a>. The READMEs located in these directories will direct you to the settings you&rsquo;ll need to change to setup push notifications.</p>

<h3><a id="3-install-platforms" class="anchor" href="#3-install-platforms"><span class="anchor-icon"></span></a>3. Install platforms</h3>

<p>After changing the push configuration you can install the platforms you want on the Cordova app. JBoss Unified Push for Cordova currently supports Android and iOS.</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">cordova</span><span class="w"> </span><span class="vg">platform</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="o">&lt;</span><span class="vg">android</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">ios</span><span class="o">&gt;</span>
</pre></div>
<h3><a id="4-add-jboss-unified-push-cordova-push-plugin" class="anchor" href="#4-add-jboss-unified-push-cordova-push-plugin"><span class="anchor-icon"></span></a>4. Add JBoss Unified Push Cordova Push plug-in</h3>

<p>You now need to add the plugin to the Cordova app.</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">cordova</span><span class="w"> </span><span class="vg">plugin</span><span class="w"> </span><span class="vg">add</span><span class="w"> </span><span class="err">`</span><span class="vg">QUICKSTART_HOME</span><span class="o">/</span><span class="vg">push</span><span class="o">-</span><span class="vg">contacts</span><span class="o">-</span><span class="vg">mobile</span><span class="o">/</span><span class="vg">client</span><span class="o">/</span><span class="vg">push</span><span class="o">-</span><span class="vg">contacts</span><span class="o">-</span><span class="vg">mobile</span><span class="o">-</span><span class="vg">cordova</span><span class="o">/</span><span class="vg">cordova_pushplugin</span><span class="o">/</span><span class="vg">org</span><span class="o">.</span><span class="vg">jboss</span><span class="o">.</span><span class="vg">aerogear</span><span class="o">.</span><span class="vg">cordova</span><span class="o">.</span><span class="vg">push</span><span class="err">`</span>
</pre></div>
<h3><a id="5-test-the-application" class="anchor" href="#5-test-the-application"><span class="anchor-icon"></span></a>5. Test the Application</h3>

<h4><a id="0-prerequisites" class="anchor" href="#0-prerequisites"><span class="anchor-icon"></span></a>0. Prerequisites</h4>

<ol>
<li>The Unified Push Server OpenShift instance must be running before the application is deployed to ensure that the device successfully registers with the Unified Push Server on application deployment.</li>
<li>The <code>push-contacts-mobile/server/push-contacts-mobile-picketlink-secured</code> application must be running before attempting to log into the mobile client application to ensure successful login. For more information, see the README distributed with the <code>push-contacts-mobile-picketlink-secured</code> application.</li>
</ol>

<h4><a id="1-deploy-for-testing" class="anchor" href="#1-deploy-for-testing"><span class="anchor-icon"></span></a>1. Deploy for Testing</h4>

<p>The application can be tested on physical Android or iOS devices only; push notifications are not available for Android emulators nor iOS simulators. To deploy, run and debug the application on an Android or iOS device attached to your system, on the command line enter the following:</p>
<div class="highlight"><pre><span class="w">    </span><span class="vg">cordova</span><span class="w"> </span><span class="vg">run</span><span class="w"> </span><span class="o">&lt;</span><span class="vg">android</span><span class="w"> </span><span class="vg">or</span><span class="w"> </span><span class="vg">ios</span><span class="o">&gt;</span>
</pre></div>
<h4><a id="2-log-in" class="anchor" href="#2-log-in"><span class="anchor-icon"></span></a>2. Log In</h4>

<p>For the <em>Log In</em> procedure on Android or iOS devices, please refer to the specific guides inside <em>push-contacts-mobile-android</em> and <em>push-contacts-mobile-ios</em> quickstarts.</p>

<h4><a id="3-send-a-push-message" class="anchor" href="#3-send-a-push-message"><span class="anchor-icon"></span></a>3. Send a Push Message</h4>

<p>For the <em>Send a Push Message</em> procedure on Android or iOS devices, please refer to the specific guides inside <em>push-contacts-mobile-android</em> and <em>push-contacts-mobile-ios</em> quickstarts.</p>

<h2><a id="run-the-quickstart-in-jboss-developer-studio-or-eclipse" class="anchor" href="#run-the-quickstart-in-jboss-developer-studio-or-eclipse"><span class="anchor-icon"></span></a>Run the Quickstart in JBoss Developer Studio or Eclipse</h2>

<p>Import the generated project into JBDS:  </p>

<p><img src="doc/import.png" alt="import"/></p>

<p>Select the project location and project and click <code>Finish</code>:  </p>

<p><img src="doc/import-angular.png" alt="import-angular"/></p>

<p>In the newly imported project, open the <code>config.xml</code> file and click <code>Add...</code> in the <code>Features</code> section:  </p>

<p><img src="doc/config-add-feature.png" alt="config-add-feature"/></p>

<p>Choose <code>Directory</code> and point to the directory containing your plugin, then click <code>Finish</code>:  </p>

<p><img src="doc/plugin-add.png" alt="plugin-add"/></p>

<p>Run the project on a device:  </p>

<p><img src="doc/run.png" alt="run"/></p>

<h1><a id="debug-the-application" class="anchor" href="#debug-the-application"><span class="anchor-icon"></span></a>Debug the Application</h1>

<ol>
<li><p>Start a browser Chrome for Android or Safari for iOS</p></li>
<li><p>Follow the instructions for the mobile device</p></li>
</ol>

<ul>
<li><p>For iOS</p>
<div class="highlight"><pre><span class="vg">Develop</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="vg">lt</span><span class="p">;</span><span class="vg">device</span><span class="w"> </span><span class="vg">name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">index</span><span class="o">.</span><span class="vg">html</span>
</pre></div></li>
<li><p>For Android</p>
<div class="highlight"><pre><span class="vg">Menu</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">Tools</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">Inspect</span><span class="w"> </span><span class="vg">Devices</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="vg">inspect</span>
</pre></div></li>
</ul>
</body></html>
